(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{632:function(e,t,s){var a={"./af":508,"./af.js":508,"./ar":509,"./ar-dz":510,"./ar-dz.js":510,"./ar-kw":511,"./ar-kw.js":511,"./ar-ly":512,"./ar-ly.js":512,"./ar-ma":513,"./ar-ma.js":513,"./ar-sa":514,"./ar-sa.js":514,"./ar-tn":515,"./ar-tn.js":515,"./ar.js":509,"./az":516,"./az.js":516,"./be":517,"./be.js":517,"./bg":518,"./bg.js":518,"./bm":519,"./bm.js":519,"./bn":520,"./bn.js":520,"./bo":521,"./bo.js":521,"./br":522,"./br.js":522,"./bs":523,"./bs.js":523,"./ca":524,"./ca.js":524,"./cs":525,"./cs.js":525,"./cv":526,"./cv.js":526,"./cy":527,"./cy.js":527,"./da":528,"./da.js":528,"./de":529,"./de-at":530,"./de-at.js":530,"./de-ch":531,"./de-ch.js":531,"./de.js":529,"./dv":532,"./dv.js":532,"./el":533,"./el.js":533,"./en-au":534,"./en-au.js":534,"./en-ca":535,"./en-ca.js":535,"./en-gb":536,"./en-gb.js":536,"./en-ie":537,"./en-ie.js":537,"./en-il":538,"./en-il.js":538,"./en-nz":539,"./en-nz.js":539,"./eo":540,"./eo.js":540,"./es":541,"./es-do":542,"./es-do.js":542,"./es-us":543,"./es-us.js":543,"./es.js":541,"./et":544,"./et.js":544,"./eu":545,"./eu.js":545,"./fa":546,"./fa.js":546,"./fi":547,"./fi.js":547,"./fo":548,"./fo.js":548,"./fr":549,"./fr-ca":550,"./fr-ca.js":550,"./fr-ch":551,"./fr-ch.js":551,"./fr.js":549,"./fy":552,"./fy.js":552,"./gd":553,"./gd.js":553,"./gl":554,"./gl.js":554,"./gom-latn":555,"./gom-latn.js":555,"./gu":556,"./gu.js":556,"./he":557,"./he.js":557,"./hi":558,"./hi.js":558,"./hr":559,"./hr.js":559,"./hu":560,"./hu.js":560,"./hy-am":561,"./hy-am.js":561,"./id":562,"./id.js":562,"./is":563,"./is.js":563,"./it":564,"./it.js":564,"./ja":565,"./ja.js":565,"./jv":566,"./jv.js":566,"./ka":567,"./ka.js":567,"./kk":568,"./kk.js":568,"./km":569,"./km.js":569,"./kn":570,"./kn.js":570,"./ko":571,"./ko.js":571,"./ky":572,"./ky.js":572,"./lb":573,"./lb.js":573,"./lo":574,"./lo.js":574,"./lt":575,"./lt.js":575,"./lv":576,"./lv.js":576,"./me":577,"./me.js":577,"./mi":578,"./mi.js":578,"./mk":579,"./mk.js":579,"./ml":580,"./ml.js":580,"./mn":581,"./mn.js":581,"./mr":582,"./mr.js":582,"./ms":583,"./ms-my":584,"./ms-my.js":584,"./ms.js":583,"./mt":585,"./mt.js":585,"./my":586,"./my.js":586,"./nb":587,"./nb.js":587,"./ne":588,"./ne.js":588,"./nl":589,"./nl-be":590,"./nl-be.js":590,"./nl.js":589,"./nn":591,"./nn.js":591,"./pa-in":592,"./pa-in.js":592,"./pl":593,"./pl.js":593,"./pt":594,"./pt-br":595,"./pt-br.js":595,"./pt.js":594,"./ro":596,"./ro.js":596,"./ru":597,"./ru.js":597,"./sd":598,"./sd.js":598,"./se":599,"./se.js":599,"./si":600,"./si.js":600,"./sk":601,"./sk.js":601,"./sl":602,"./sl.js":602,"./sq":603,"./sq.js":603,"./sr":604,"./sr-cyrl":605,"./sr-cyrl.js":605,"./sr.js":604,"./ss":606,"./ss.js":606,"./sv":607,"./sv.js":607,"./sw":608,"./sw.js":608,"./ta":609,"./ta.js":609,"./te":610,"./te.js":610,"./tet":611,"./tet.js":611,"./tg":612,"./tg.js":612,"./th":613,"./th.js":613,"./tl-ph":614,"./tl-ph.js":614,"./tlh":615,"./tlh.js":615,"./tr":616,"./tr.js":616,"./tzl":617,"./tzl.js":617,"./tzm":618,"./tzm-latn":619,"./tzm-latn.js":619,"./tzm.js":618,"./ug-cn":620,"./ug-cn.js":620,"./uk":621,"./uk.js":621,"./ur":622,"./ur.js":622,"./uz":623,"./uz-latn":624,"./uz-latn.js":624,"./uz.js":623,"./vi":625,"./vi.js":625,"./x-pseudo":626,"./x-pseudo.js":626,"./yo":627,"./yo.js":627,"./zh-cn":507,"./zh-cn.js":507,"./zh-hk":628,"./zh-hk.js":628,"./zh-tw":629,"./zh-tw.js":629};function n(e){var t=r(e);return s(t)}function r(e){var t=a[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=632},642:function(e,t,s){"use strict";s.d(t,"a",function(){return y});s(505);var a=s(506),n=s.n(a),r=(s(216),s(217)),c=s.n(r),l=s(152),i=s.n(l),j=s(153),o=s.n(j),m=s(154),u=s.n(m),d=s(155),h=s.n(d),p=s(156),f=s.n(p),k=s(2),v=s.n(k),y=function(e){function t(){return i()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"render",value:function(){var e=this,t=this.props,s=t.text,a=t.route,r=t.right;return v.a.createElement(n.a,{mode:"light",icon:[v.a.createElement(c.a,{key:"0",type:"left",size:"lg"})],onLeftClick:function(){return e.props.history.goBack()},rightContent:v.a.createElement("div",{onClick:function(){return e.props.history.push(a||"")}},r||"")},s||"")}}]),t}(k.Component)},643:function(e,t,s){"use strict";s.r(t);var a=s(81),n=s.n(a),r=s(107),c=s.n(r),l=s(152),i=s.n(l),j=s(153),o=s.n(j),m=s(154),u=s.n(m),d=s(155),h=s.n(d),p=s(156),f=s.n(p),k=s(48),v=s.n(k),y=s(83),b=s.n(y),E=s(2),g=s.n(E),z=s(108),D=s(1),w=s.n(D),N=(s(507),s(642)),T=s(84),C=function(e){function t(){var e;return i()(this,t),e=u()(this,h()(t).call(this)),b()(v()(v()(e)),"handleStatistic",c()(n.a.mark(function t(){var s,a,r,c,l,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(z.a)({method:"GET",headers:{"Content-Type":"application/json;charset=utf-8","Access-User-Token":e.props.token},url:"".concat(z.c,"/task/statistic")});case 2:0==(s=t.sent).retCode&&(a=new Date,r=w()(a).format("YYYY-MM-DD"),c=w()(a).format("HH:mm:ss"),l={},(i=s.acts).map(function(e,t){e.date==r&&c<e.endTime&&((l=e).startTime=w()(Date.parse(l.date+" "+l.startTime)).format("HH:mm"),l.endTime=w()(Date.parse(l.date+" "+l.endTime)).format("HH:mm"),i.splice(t,1))}),e.setState({taskObj:l}),e.handleData(s.cost,i));case 4:case"end":return t.stop()}},t,this)}))),e.state={cost:6,modal:!1,checked:!0,userInfo:{},taskObj:{},acts:[],taskTate:{0:"未参与",1:"已签约",2:"未开始",3:"进行中",4:"中途打断，未完成任务",5:"完成任务"},taskCont:{0:"未参与今日调峰任务",2:"今日任务：",3:"今日调峰任务进行中",4:"调峰任务被打断"}},e}return f()(t,e),o()(t,[{key:"render",value:function(){var e,t=this.state,s=t.acts,a=t.taskTate,n=t.cost,r=t.taskObj,c=t.taskCont;return g.a.createElement(E.Fragment,null,g.a.createElement(N.a,(e={text:"已签约",history:this.props.history,right:"活动详情"},b()(e,"history",this.props.history),b()(e,"route","./detail"),e)),g.a.createElement("div",{className:"signed-con align-center"},g.a.createElement("div",{className:"task"},g.a.createElement("header",null,"已累计调峰"),g.a.createElement("div",{className:"count"},g.a.createElement("span",null,n," "),g.a.createElement("span",null,"次")),g.a.createElement("div",{className:"taskBox"},g.a.createElement("div",{className:"task-con task".concat(r.state)},g.a.createElement("div",null,"{}"!==JSON.stringify(r)?c[r.state]+("2"==r.state?r.startTime+" 计划调峰":""):"今日暂无电量调峰任务")))),g.a.createElement("div",{className:"diary"},g.a.createElement("div",{className:"diary-title"},"活动日记"),g.a.createElement("div",{className:"align-left diary-con"},s.map(function(e,t){return g.a.createElement("div",{key:t},g.a.createElement("div",{className:"month"},e.month,g.a.createElement("span",null,"月")),g.a.createElement("ul",null,e.data.map(function(e,t){return g.a.createElement("li",{key:t},g.a.createElement("em",null),g.a.createElement("span",{className:"day"},w()(Date.parse(e.date)).format("DD"),g.a.createElement("span",null,"日"))," ",g.a.createElement("span",{className:"time"},w()(Date.parse(e.date+" "+e.startTime)).format("HH:mm"),"-",w()(Date.parse(e.date+" "+e.endTime)).format("HH:mm")),"  ",g.a.createElement("span",null,a[e.state]))})))})))))}},{key:"componentDidMount",value:function(){var e=this;this.handleStatistic(),this.timer=setInterval(function(){e.handleStatistic()},6e4)}},{key:"handleData",value:function(e,t){var s=[],a=[];t.map(function(e,n){w()(Date.parse(e.date)).format("MM")==(t[n+1]?w()(Date.parse(t[n+1].date)).format("MM"):"")?a.push(e):(a.push(e),s.push(a.slice(0)),a.length=0)});var n=[];s.map(function(e){n.push({month:w()(Date.parse(e[0].date)).format("M"),data:e})}),this.setState({cost:e,acts:n.concat()})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}}]),t}(E.Component);t.default=Object(T.b)(function(e){return{userId:e.userInfo.userId,token:e.userInfo.token}})(C)}}]);
//# sourceMappingURL=2.chunk.js.map